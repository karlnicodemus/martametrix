<!DOCTYPE html>
<html lang="en">
<head>
  <title>MARTA Metrics</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <link href="header.css" rel="stylesheet">
  <link href="main.css" rel="stylesheet">
  <link rel="stylesheet" href="scripts/leaflet/leaflet.css" />
  <script src="scripts/leaflet/leaflet.js"></script>
  <script src='https://api.tiles.mapbox.com/mapbox.js/v2.2.2/mapbox.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox.js/v2.2.2/mapbox.css' rel='stylesheet' />
  <script src='features.json'></script>
  <script src='paths.json'></script>
</head>
<body>
<div class="container">
	<!-- Header -->
	<div class="row">
  		<div class="col-xs-10 col-sm-9">
  			<h1 class="large"><b>ATLANTA</b>GEORGIA </h1>
  		</div>
  		<div class="col-xs-2 col-sm-3 col-logo">
  			<img src="./files/logo.png" class="img-responsive logo"/><img src="./files/logo2.png" class="img-responsive logo2"/>
  		</div>
	</div>
	<!--Content-->
	<div class="row">
		<div class="col-lg-6 col-md-5 col-xs-3 col-main1">
				<div id="map"></div> 
				<script type="text/javascript">
					L.mapbox.accessToken = 'pk.eyJ1Ijoic3RhY2VidWciLCJhIjoiY2lndHRmZWQyMDhzdHYxa28yeDk0b2kydCJ9.66UKWBa3jEwcoJ4BAEUuVQ';
					var southWest = L.latLng(33.583602, -84.504154),
    					northEast = L.latLng(33.959462, -84.198486),
    					bounds = L.latLngBounds(southWest, northEast);
					var map = L.mapbox.map('map', 'mapbox.streets',{maxBounds:bounds, maxZoom:13, minZoom:10}).setView([33.748465061732354, -84.39079284667969],11)
					var tileLayer = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
   						attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    					id: 'stacebug.cigttfd6e08yjueko0jdf33ix', 
    					accessToken: 'pk.eyJ1Ijoic3RhY2VidWciLCJhIjoiY2lndHRmZWQyMDhzdHYxa28yeDk0b2kydCJ9.66UKWBa3jEwcoJ4BAEUuVQ'
					}).addTo(map);

					var myLayer = L.mapbox.featureLayer(paths).addTo(map);
		
					var iconLayer = L.mapbox.featureLayer().addTo(map);
					iconLayer.on('layeradd', function(e) {
						var icons = e.layer;
						var feature = icons.feature;
						icons.setIcon(L.icon(feature.properties.icon));
					})

					iconLayer.setGeoJSON(data);
//Below is trying  to change the text on click
					function resetText() {
						for (var i = 0; i < data.length; i++) {
							data[i].properties['marker-color'] = data[i].properties['old-color'] || data[i].properties['marker-color'];
						}
						iconLayer.setGeoJSON(data);
					}

					iconLayer.on('click', function(e) {
						text();
						e.layer.feature.properties['old-color'] = e.layer.feature.properties['marker-color'];
						e.layer.feature.properties['marker-color'] = '#ff8888';
						iconLayer.setGeoJSON(data);
					});
					map.on('click', resetText);
//Break

					</script> 
				
		</div>
		<div class="col-lg-6 col-md-7 col-xs-9  col-main2">
			<div class="col-type col-data">
				<h1 class="data-header"><b>BUCKHEAD</b></h1> 
				<!-- onclick='changeText()' -->
				<b class="data-content">
				<p style="height:300px">TRANSPORTATION</p>
				<p style="height:300px">CRIME</p>
				<p style="height:200px">POVERTY</p>
				</b>
			</div>
		</div>
	</div>
</div>

</body>
</html>
